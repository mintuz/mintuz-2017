{"componentChunkName":"component---src-templates-post-js","path":"/2016/05/19/composable-react-components","result":{"data":{"site":{"siteMetadata":{"siteTitle":"Mintuz","siteTitlePrefix":"CSS, Javascript and Web Performance","googleVerification":"RnXDiD3_kyC6xc4y2AbSsJoXcLZvza1W7rYVHBGA89M","locale":"en_GB","siteUrl":"https://mintuz.com","author":"Adam Bulmer","keywords":["Web Performance","Web Developer","Web Developer Manchester","Software Engineer Manchester","ReactJS","React","React Components"],"description":"Software Engineer from Manchester writing posts on CSS, React, JavaScript and Web Performance.","twitterHandle":"@mintuz"}},"markdownRemark":{"id":"5c6fe39b-bd20-5b11-9989-e948bedcfb79","html":"<p>Hello in this blog post I want to talk about a problem I have recently had within the BBC Live team and how we solved it. To begin with I should probably give you a little bit of context to the problem.</p>\n<p>I joined the BBC Homepage team at the end of 2014, at the same time ReactJS was really gaining traction within the web development community and people were releasing reusable components through npm. Awesome I thought… All these free components to use for my own use, I wonder if I could do something similar within the BBC because we have a <a href=\"http://www.bbc.co.uk/gel/guidelines/promos\">Promo</a> design pattern which is used all over the BBC implemented by different teams in different languages.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/27d74f618e13da6396a5f6d401ef62ee/0a47e/promo.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.166666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABBElEQVQoz6WRaWqEUBCE5/7X8AAeQZ1RRwRFnLhGBRUUBYm7zzUp1EBCBuZHCmzaZ33dvPLy+Q9d8MzzPAzDsizruhJCmqZp27bv+49d6Luug6H9FgzTNJ1wnueu68IHk+M4HMfxPC/LsqqqDMMIgiBJkmma/C68siwbhuEJYyHWYti2bZ7nXXcBsG1bURTbtgzD0DQNg0RRPJogCE74EEhUXddpmobpfhejKHbd97IsCRlvtytFURGO4tiyrDRNf8GHcOr7Pi6SJAmq5/tZluGe6B+PNwyq67qqqnEcn8A/hfCKooAbVsSBHrmAR8WnJ/C26+8g/BHsR+aIBiQyerH5pb4AeMf5bz2e5eIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"promo\"\n        title=\"promo\"\n        src=\"/static/27d74f618e13da6396a5f6d401ef62ee/fcda8/promo.png\"\n        srcset=\"/static/27d74f618e13da6396a5f6d401ef62ee/12f09/promo.png 148w,\n/static/27d74f618e13da6396a5f6d401ef62ee/e4a3f/promo.png 295w,\n/static/27d74f618e13da6396a5f6d401ef62ee/fcda8/promo.png 590w,\n/static/27d74f618e13da6396a5f6d401ef62ee/0a47e/promo.png 600w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>This obviously leads to loads of code duplication and the same bugs/challenges will occur.</p>\n<h2>Old Approach</h2>\n<p>The first iteration of the promo component I worked on was tightly coupled to the homepage codebase. The homepage codebase is comprised of several different modules, for example we have a top stories module and a tv radio module. Both modules make use of the promo design pattern. However the data for each module is passed down and it’s the modules responsibility to build the DOM for the Promo.</p>\n<p><a href=\"https://gist.github.com/mintuz/5f756c3e63767a5d8ab69ee36ec6ef63#file-top-down-approach-jsx\">https://gist.github.com/mintuz/5f756c3e63767a5d8ab69ee36ec6ef63#file-top-down-approach-jsx</a> The problem with this approach is that it’s not very configurable and if the UX guys fancy changing the visual look of one of the promos, maybe for an important event or if it’s a breaking news item then it means passing more data into the module and having a bunch of conditionals to add custom CSS classes and we might need to change the markup slightly as well.</p>\n<p>This approach works well for the homepage because it’s not got many promo variants so it doesn’t need granular control over a promos DOM structure and CSS classes. This isn’t to say the homepage isn’t complicated but there wasn’t a need to over engineer a solution that would work for multiple use cases.</p>\n<h2>Problem</h2>\n<p>So fast forward to 2016 and I am now apart of the BBC Live team which is responsible for Live Pages, Live Guide and Live Promo products. Each product makes use of the promo design pattern but the use cases are slightly different. The Live Page is mainly concerned with the 4th promo variant in the mock up above and the Live Promo uses the same variant but at smaller screen sizes, the content overlays the image and gains a transparent gradient. There are loads of similarities between both promo styles so we needed a way to share code so we didn’t end up duplicating code.</p>\n<h2>Solution - How to make composable React components</h2>\n<p>By the time we reached this problem, I had been playing around with React Native and had gotten used to the idea of using <a href=\"https://facebook.github.io/react/tips/children-props-type.html\">this.props.children</a> to make components composable. It allows you to nest components as you would with DOM elements and allows each component to handle it’s own use cases, preventing one component doing everything.</p>\n<p>Another benefit of building components like this is that we can make each element within the promo a separate npm package making it reusable and useful by itself. If we use the this.props.children property correctly it also allows us to cut down on our dependency tree bringing in all our dependencies at the same point and not having components requiring components.</p>\n<p>Variant 4 may look a little something like this in the code using this approach.</p>\n<p><a href=\"https://gist.github.com/mintuz/5f756c3e63767a5d8ab69ee36ec6ef63#file-composable-approach-1-jsx\">https://gist.github.com/mintuz/5f756c3e63767a5d8ab69ee36ec6ef63#file-composable-approach-1-jsx</a> The same promo may look a little something like this if we want the content to overlay the image at a certain breakpoint. The great thing about this.props.children is it allows us to nest DOM elements and custom components, so you can add bits of code which are specific to your use case.</p>\n<p><a href=\"https://gist.github.com/mintuz/5f756c3e63767a5d8ab69ee36ec6ef63#file-composable-approach-2-jsx\">https://gist.github.com/mintuz/5f756c3e63767a5d8ab69ee36ec6ef63#file-composable-approach-2-jsx</a> So these two examples use a lot of the promo elements available to us but what about when we have no image or we don’t care about tags. Suddenly we’ve created variant 1 (No image)</p>\n<p><a href=\"https://gist.github.com/mintuz/5f756c3e63767a5d8ab69ee36ec6ef63#file-composable-approach-basic-jsx\">https://gist.github.com/mintuz/5f756c3e63767a5d8ab69ee36ec6ef63#file-composable-approach-basic-jsx</a> I hope this has demonstrated how powerful this.props.children can be and how it can help you build UI elements that are reusable and flexible enough to allow you to compose components and different variants of a component.</p>","excerpt":"Hello in this blog post I want to talk about a problem I have recently had within the BBC Live team and how we solved it. To begin with I…","frontmatter":{"path":"/2016/05/19/composable-react-components","features":"cta-contact","title":"Composable React Components","date":"May 19, 2016"}}},"pageContext":{}}}